{% extends 'base.html.twig' %}

{% form_theme form 'bootstrap_4_layout.html.twig' %}

{% block title %}Edit ExpertMeeting{% endblock %}

{% macro fieldsPrototype(timeSlot) %}
    <div class="d-flex js-time-slot-item mb-3">
        {{ form_widget(timeSlot.date, {'attr': {'class': 'mr-3'}}) }}
        {{ form_widget(timeSlot.startTime, {'attr': {'class': 'mr-3'}}) }}
        {{ form_widget(timeSlot.endTime, {'attr': {'class': 'mr-3'}}) }}
        <a href="#" class="js-remove-time-slot pull-right">
            <i class="fas fa-times-circle"></i>
        </a>
    </div>
    {{ form_errors(timeSlot) }}
{% endmacro %}

{% block body %}
<div class="main-section">
    <div class="container-bv">
        <div class="main-section-data page-content">
            <div class="row">

                <div class="offset-3 col-lg-6">
                    <div class="main-ws-sec">
                        <div class="product-feed-tab current" id="info-dd">
                            <div class=" page-title sign_in_sec current">
                                {% if edit == true %}
                                    <h3>Modifier mon rendez-vous expert</h3>
                                {% else %}
                                    <h3> Créer mon rendez-vous expert</h3>
                                {% endif %}

                                {{ form_start(form)}}
                                    <div class="row">
                                        <div class="col-12 form-group">
                                            {{ form_row(form.expertise, {'label': 'Votre expertise'}) }}
                                        </div>
                                    </div>
                                    <p>Vous acceptez :</p>
                                    <div class="row">
                                        <div class="col-6 form-group">
                                            {{ form_row(form.isVisio, {'label': 'En visio-conférence'}) }}
                                        </div>
                                        <div class="col-6 form-group">
                                            {{ form_row(form.isInCompany, {'label': 'En entreprise'}) }}
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-12 form-group">
                                            {{ form_row(form.address, {'label': 'Adresse'}) }}
                                        </div>
                                    </div>

                                    <p>Vos créneaux disponibles : </p>

                                    {# store the prototype on the data-prototype attribute #}
                                    <div id="time-slots-fields-list" data-prototype="{{ _self.fieldsPrototype(form.timeSlots.vars.prototype)|e }}" data-widget-tags="{{ '<li></li>'|e }}" data-widget-counter="{{ form.timeSlots|length }}">
                                        {% for timeSlot in form.timeSlots %}
                                            {{ _self.fieldsPrototype(timeSlot) }}
                                        {% endfor %}
                                        <a type="button" class="add-another-collection-widget" data-list-selector="#time-slot-fields-list"> <span class="fa fa-plus-circle"></span> Ajouter un nouveau créneau</a>
                                    </div>

                                    {# prevents weird label from showing up in new #}
                                    {{ form_widget(form.timeSlots) }}

                                    <div class="text-center">
                                        <button type="submit" class="btn orange-bg">Valider</button>
                                    </div>
                                {{ form_end(form) }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('collectionPrototype') }}
{% endblock %}