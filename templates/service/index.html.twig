{% extends 'base.html.twig' %}

{% block title %}Services{% endblock %}

{% block body %}

    <section id="services">
        <div class="wrapper">
            <div class="row">
                <div class="col-lg-3 position-sidebar">
                    <nav class="sidebar">
                        <div class="container-sidebar">
                            <div class="filters mt-4">
                                <h4>Recherche</h4>
                                {{ form_start(searchForm) }}
                                <div class="mt-3">
                                    {{ form_widget(searchForm.query) }}
                                </div>
                                <div class="mt-3">
                                    {{ form_widget(searchForm.category) }}
                                </div>
                                <div class="mt-3">
                                    <div class="text-center"><button type="submit" class="btn-filter-search" title="Chercher">Chercher</button></div>
                                </div>
                                {{ form_end(searchForm) }}
                            </div>
                            {% if is_granted('ROLE_ADMIN') %}
                                <hr/>
                                <div>
                                    <a href="{{ path('service_user', {'id': app.user.id}) }}" type="button" class="btn btn-design btn-2 mt-3" style="width: 100%">Mes services</a>
                                    <a href="{{ path('service_new') }}" type="button" class="btn btn-design btn-2 mt-3" style="width: 100%">Je crée mon service</a>
                                </div>
                            {% endif %}
                            <div class="contact">
                                <hr/>
                                <div class="avatar">
                                    <img src="/images/default/user.png" class="img-fluid dashboard-profil-img" alt="">
                                </div>
                                <p>Mon conseiller <strong>Richard Bryand</strong></p>
                                <div class="mt-4">
                                    Magasin : Les clayes sous-bois
                                    <a href="#"><small>Contacter mon conseiller</small></a>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
                <div class="offset-lg-3 col-lg-9 position-content">
                    {% include 'partials/flashes.html.twig' %}
                    <div class="mt-5">
                        <header class="section-header">
                            {% if isPrivate != true %}
                                <h3>Services</h3>
                                <p>Les services créés par votre communauté pour vous !</p>
                            {% else %}
                                <h3>Mes services</h3>
                                <p>Contribuez à la vie de votre communauté en proposant vos services !</p>
                            {% endif %}
                        </header>

                        <div class="row">
                            {% if services %}
                                {% for service in services %}
                                    {% set icons = [
                                    '<i class="ion-ios-analytics-outline" style="color: #ff689b;"></i>',
                                    '<i class="ion-ios-paper-outline" style="color: #3fcdc7;"></i>',
                                    '<i class="ion-ios-world-outline" style="color: #d6ff22;"></i>',
                                    '<i class="ion-ios-speedometer-outline" style="color:#41cf2e;"></i>',
                                    '<i class="ion-ios-clock-outline" style="color: #4680ff;"></i>'
                                    ] %}
                                    <div class="col-lg-4 col-md-6 col-sm-12 wow bounceInUp position-content" data-wow-duration="1.4s">
                                        <div class="box card">
                                            <a href="{{ path('service_show', {'id': service.id}) }}">
                                                <div class="portfolio-wrap dashboard-service-image">
                                                    {% if service.filename %}
                                                        <img src="{{ vich_uploader_asset(service, 'imageFile') }}" class="img-fluid" alt="">
                                                    {% else %}
                                                        <img src="/images/default/unknown.png" class="img-fluid" alt="">
                                                    {% endif %}
                                                </div>
                                                <div class="info">
                                                    <div class="icon">{{ random(icons)|raw }}</div>
                                                    <h4 class="title">{{ service.title }}</h4>
                                                    <p class="description">{{ service.introduction }}</p>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                {% endfor %}
                            {% else %}
                                <div class="box full-width text-center">
                                    <p class="text-muted">Aucun service dans cette catégorie</p>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

{% endblock %}
